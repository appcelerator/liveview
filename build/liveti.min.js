function consoleBanner(){console.log(" ");console.log("################################################################");console.log("#      LiveTi, Titanium Live file runner, version 0.0.1        #");console.log("# Copyright (c) 2013, Appcelerator, Inc.  All Rights Reserved. #");console.log("#                                                              #");console.log("# Please report bugs to http://jira.appcelerator.org/          #");console.log("################################################################");console.log(" ")}function Emitter(obj){if(obj)return mixin(obj)}function mixin(obj){for(var key in Emitter.prototype){obj[key]=Emitter.prototype[key]}return obj}Emitter.prototype.on=function(event,fn){this._callbacks=this._callbacks||{};(this._callbacks[event]=this._callbacks[event]||[]).push(fn);return this};Emitter.prototype.once=function(event,fn){var self=this;this._callbacks=this._callbacks||{};function on(){self.off(event,on);fn.apply(this,arguments)}fn._off=on;this.on(event,on);return this};Emitter.prototype.off=function(event,fn){this._callbacks=this._callbacks||{};var callbacks=this._callbacks[event];if(!callbacks)return this;if(1==arguments.length){delete this._callbacks[event];return this}var i=callbacks.indexOf(fn._off||fn);if(~i)callbacks.splice(i,1);return this};Emitter.prototype.emit=function(event){this._callbacks=this._callbacks||{};var args=[].slice.call(arguments,1),callbacks=this._callbacks[event];if(callbacks){callbacks=callbacks.slice(0);for(var i=0,len=callbacks.length;i<len;++i){callbacks[i].apply(this,args)}}return this};Emitter.prototype.listeners=function(event){this._callbacks=this._callbacks||{};return this._callbacks[event]||[]};Emitter.prototype.hasListeners=function(event){return!!this.listeners(event).length};function Process(){if(!(this instanceof Process)){return new Process}this.title="titanium";this.version="";this.moduleLoadList=[];this.versions={};this.arch=Ti.Platform.architecture;this.platform=Ti.Platform.name;this.hardware=Ti.Platform.model}Process.prototype.__proto__=Emitter.prototype;var module=module||{};var Module=module.exports=function(id){this.filename=id+".js";this.id=id;this.exports={};this.loaded=false};var global=Module._global=Module.global={};var process=global.process=Process();global.ENV="liveti";global.logging=false;global.CATCH_ERRORS=false;Module._cache={};Module._requireNative=function(){throw new Error("Module.patch must be run first")};Module._includeNative=function(){throw new Error("Module.patch must be run first")};Module.patch=function(globalCtx,port,url){Module._url=url||"FSERVER_HOST";Module._port=port||8324;Module._requireNative=globalCtx.require;return globalCtx.require=Module.require};Module.include=function(id){var file=id.replace(".js","");var src=Module.prototype._getRemoteSource(file,3e3);return eval(src)};Module.require=function(id){var fullPath=id;var cached=Module.getCached(fullPath);if(cached){return cached.exports}if(!Module.exists(fullPath)){try{console.log("Loading Native Module");Module._requireNative(id)}catch(e){throw new Error("No such module "+id)}}var freshModule=new Module(fullPath);if(global.ENV!=="liveti"){freshModule.cache()}freshModule._compile();while(!freshModule.loaded){}return freshModule.exports};Module.getCached=function(id){return Module._cache[id]};Module.exists=function(id){var path=Ti.Filesystem.resourcesDirectory+id+".js";var file=Ti.Filesystem.getFile(path);return file.exists()};Module.prototype._getRemoteSource=function(file,timeout){var expireTime=(new Date).getTime()+timeout;var request=Ti.Network.createHTTPClient();var rsp=null;var file="http://"+Module._url+":"+Module._port+"/"+(file||this.id)+".js";request.cache=false;request.open("GET",file);request.send();while(!rsp){if(request.readyState===4){rsp=request.responseText}else if(expireTime-(new Date).getTime()<=0){rsp=true;throw new Error("Timed Out")}}return rsp};Module.prototype._getSource=function(){var id=this.id;var isRemote=/^(http|https)$/.test(id)||global.ENV==="liveti";if(isRemote){return this._getRemoteSource(null,3e3)}else{var file=Ti.Filesystem.getFile(Ti.Filesystem.resourcesDirectory,id+".js");return(file.read()||{}).text}};Module._wrap=function(source){var script=global.CATCH_ERRORS?Module._errWrapper[0]+source+Module._errWrapper[1]:source;return Module._wrapper[0]+script+Module._wrapper[1]};Module._errWrapper=["try {",'} catch (err) { process.emit("uncaughtException", {module: this, error: err})}'];Module._wrapper=["(function (exports, require, module, __filename, __dirname) { ","})"];Module.prototype._compile=function(){var source=Module._wrap(this._getSource());var fn=eval(source);fn(this.exports,Module.require,this,this.filename,this.__dirname);this.loaded=true};Module.prototype.cache=function(){this.timestamp=(new Date).getTime();Module._cache[this.id]=this};(function(globalCtx){Module.patch(globalCtx);var win=Ti.UI.createWindow({backgroundColor:"#000000"});win.open();var app=require("app");Module.global.reload=function(){app.close();app=require("app")};Ti.Gesture.addEventListener("shake",function(e){Module.global.reload()})})(this);