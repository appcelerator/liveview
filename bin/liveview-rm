#!/usr/bin/env node

/**
 * Module dependencies.
 */

// inject shelljs to the global scope

require('shelljs/global');

var program = require('commander')
  , colors = require('coloring')
  , path = require('path');

program.Command.prototype.unknownOption = function(){};

// usage

program
  .usage('rm <name> [options]');

// examples

program.on('--help', function(){
  console.log('  Examples:');
  console.log();
  console.log('    # remove cli hook');
  console.log('    $ liveview rm clihook');
  console.log();
});

// parse argv

program.parse(process.argv);


// package

var pkg = (program.args.shift()||'').toLowerCase();

if (pkg === 'clihook') { rmHook(); }

/**
 * [installHook description]
 * @return {[type]} [description]
 */

function rmHook() {
  var hook = path.normalize(__dirname + '/../hook');
  exec('liveview server stop --no-banner');
  exec('titanium -q config paths.hooks -r ' + hook, function (res) {
    var outcome = (res.code) ? 'not removed'.red : 'removed'.green;
    console.log(' Titanium CLI Hook ' + outcome + '\n');
  });
}