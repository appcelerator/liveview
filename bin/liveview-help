#!/usr/bin/env node
'use strict';
const program = require('commander'),
	chalk = require('chalk'),
	exec = require('child_process').exec,
	{ red } = chalk;

// parse argv
program.parse(process.argv);

// output available commands
const cmd = program.args[0] ? 'liveview ' + program.args[0] + ' --help' : 'liveview --help';
// We need to set this so that chalk picks up in the exec
process.env.FORCE_COLOR = 1;
exec(cmd, function (err, stdout) {
	if (err) {
		console.error(`${red('ERROR')} invalid command: ${red(cmd)}`);
		process.stdout.write(program.helpInformation());
		process.exit(127);
	}
	process.stdout.write(stdout);
});
